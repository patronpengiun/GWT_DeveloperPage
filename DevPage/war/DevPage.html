<!doctype html>
<!-- The DOCTYPE declaration above will set the     -->
<!-- browser's rendering engine into                -->
<!-- "Standards Mode". Replacing this declaration   -->
<!-- with a "Quirks Mode" doctype is not supported. -->

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="DevPage.css">
    <script type="text/javascript" language="javascript" src="devpage/devpage.nocache.js"></script>
    <title>Developer Page</title>
  </head>

  <body>
  	
    <button id="pay">Buy Token</button>
  	<div class="returndata" id="output"></div>
  	<div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : 745520798812858,
          cookie     : true,
          status     : true,
          xfbml      : true
        });
      
      FB.Event.subscribe('auth.authResponseChange', function(response) {
    	    if (response.status === 'connected') {
    	      console.log('Logged in');
    	    } else {
    	      FB.login();
    	    }
    	  });
    	  
    	function buy() {
          var obj = {
            method: 'pay',
            action: 'purchaseitem',
            product: 'http://3a-dot-demodevpage.appspot.com/token.html'
          };

          FB.ui(obj, function(data) {
              console.log(data);
            });
            
        }

       document.getElementById('pay').onclick = function() {buy()};
    	  
    	};

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/all.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>
<!--     
    <script type="text/javascript">
     window.fbAsyncInit = function() {
        FB.init({
          appId      : 745520798812858,
          status     : true,
          cookie     : true,
          xfbml      : true
        });

        function buy() {
          var obj = {
            method: 'pay',
            action: 'purchaseitem',
            product: 'http://3a-dot-demodevpage.appspot.com/token.html'
          };

          FB.ui(obj, function(data) {
              console.log(data);
            });
        }

        document.getElementById('pay').onclick = function() {buy()};
      };
      
      // Load the SDK Asynchronously
      (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
      }(document));
    </script>
-->     
    <fb:login-button show-faces="true" width="200" max-rows="1"></fb:login-button>
  
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>
    
    <noscript>
      <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>

    <div id="NavBar"></div>
    
    <div id="content"></div>
    
	<div id="prompt-modal"></div>
	
	<div id="signup-modal"></div>
    
  </body>
</html>
